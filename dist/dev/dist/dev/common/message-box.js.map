{"version":3,"sources":["common/message-box.js"],"names":["showMessageBox","vMessage","mOptions","oDialog","oMessageText","vMessageContent","oResult","that","aButtons","i","sIcon","sTitle","vActions","fnCallback","sDialogId","sClass","mDefaults","initialFocus","textDirection","sap","ui","core","TextDirection","Inherit","verticalScrolling","horizontalScrolling","details","contentWidth","mIcons","mClasses","hasOwnProperty","icon","actions","jQuery","extend","isArray","length","button","sAction","sText","oButton","m","Button","id","ElementMetadata","uid","text","press","close","push","getInformationLayout","JSON","stringify","replace","oFT","FormattedText","htmlText","setVisible","oShowLink","Link","getCore","getLibraryResourceBundle","getText","_setInitialFocus","addStyleClass","VBox","items","onclose","onClose","detachAfterClose","destroy","getInitialFocusControl","oInitialFocusControl","Control","toLowerCase","Text","setText","onOpen","getConfiguration","getAccessibility","$","attr","Dialog","type","DialogType","Message","title","content","afterOpen","afterClose","buttons","ariaLabelledBy","getId","undefined","STANDARD","styleClass","open"],"mappings":"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","file":"../../../common/message-box.js","sourcesContent":["\r\nexport function showMessageBox(vMessage,mOptions) {\r\n    var oDialog, oMessageText, vMessageContent, oResult = null, that = this, aButtons = [], i,\r\n\t\t\t\t\t\t\tsIcon, sTitle, vActions, fnCallback, sDialogId, sClass,\r\n\t\t\t\t\t\t\tmDefaults = {\r\n\t\t\t\t\t\t\t\tinitialFocus: null,\r\n\t\t\t\t\t\t\t\ttextDirection: sap.ui.core.TextDirection.Inherit,\r\n\t\t\t\t\t\t\t\tverticalScrolling: true,\r\n\t\t\t\t\t\t\t\thorizontalScrolling: true,\r\n\t\t\t\t\t\t\t\tdetails: \"\",\r\n\t\t\t\t\t\t\t\tcontentWidth: null\r\n\t\t\t\t\t\t\t};\r\n                    var mIcons = {\r\n\t\t\t\t\t\t\t\"INFORMATION\": \"sap-icon://message-information\",\r\n\t\t\t\t\t\t\t\"WARNING\": \"sap-icon://message-warning\",\r\n\t\t\t\t\t\t\t\"ERROR\": \"sap-icon://message-error\",\r\n\t\t\t\t\t\t\t\"SUCCESS\": \"sap-icon://message-success\",\r\n\t\t\t\t\t\t\t\"QUESTION\": \"sap-icon://question-mark\"\r\n\t\t\t\t\t\t};\r\n                    var mClasses = {\r\n\t\t\t\t\t\t\t\"INFORMATION\": \"sapMMessageBoxInfo\",\r\n\t\t\t\t\t\t\t\"WARNING\": \"sapMMessageBoxWarning\",\r\n\t\t\t\t\t\t\t\"ERROR\": \"sapMMessageBoxError\",\r\n\t\t\t\t\t\t\t\"SUCCESS\": \"sapMMessageBoxSuccess\",\r\n\t\t\t\t\t\t\t\"QUESTION\": \"sapMMessageBoxQuestion\",\r\n\t\t\t\t\t\t\t\"STANDARD\":  \"sapMMessageBoxStandard\"\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\tif (mOptions && mOptions.hasOwnProperty(\"details\")) {\r\n\t\t\t\t\t\tmDefaults.icon = \"INFORMATION\";\r\n\t\t\t\t\t\tmDefaults.actions = [\"OK\", \"CANCEL\"];\r\n\t\t\t\t\t\tmOptions = jQuery.extend({}, mDefaults, mOptions);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmOptions = jQuery.extend({}, mDefaults, mOptions);\r\n\r\n\t\t\t\t\t// normalize the vActions array\r\n\t\t\t\t\tif (typeof mOptions.actions !== \"undefined\" && !jQuery.isArray(mOptions.actions)) {\r\n\t\t\t\t\t\tmOptions.actions = [mOptions.actions];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!mOptions.actions || mOptions.actions.length === 0) {\r\n\t\t\t\t\t\tmOptions.actions = [\"OK\"];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t/** creates a button for the given action */\r\n\t\t\t\t\tfunction button(sAction) {\r\n\t\t\t\t\t\tvar sText;\r\n\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\tvar oButton = new sap.m.Button({\r\n\t\t\t\t\t\t\tid: sap.ui.core.ElementMetadata.uid(\"mbox-btn-\"),\r\n\t\t\t\t\t\t\ttext: sText || sAction,\r\n\t\t\t\t\t\t\tpress: function () {\r\n\t\t\t\t\t\t\t\toResult = sAction;\r\n\t\t\t\t\t\t\t\toDialog.close();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn oButton;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (i = 0; i < mOptions.actions.length; i++) {\r\n\t\t\t\t\t\taButtons.push(button(mOptions.actions[i]));\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction getInformationLayout(mOptions, oMessageText) {\r\n\t\t\t\t\t\t//Generate MessageBox Layout\r\n\t\t\t\t\t\tif (typeof mOptions.details == 'object') {\r\n\t\t\t\t\t\t\t//covers JSON case\r\n\t\t\t\t\t\t\t//Using stringify() with \"tab\" as space argument and escaping the JSON to prevent binding\r\n\t\t\t\t\t\t\tmOptions.details = \"<pre>\" + JSON.stringify(mOptions.details, null, '\\t')\r\n\t\t\t\t\t\t\t\t.replace(/{/gi, \"\\\\{\") + \"</pre>\";\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar oFT = new sap.m.FormattedText({\r\n\t\t\t\t\t\t\thtmlText: mOptions.details\r\n\t\t\t\t\t\t}).setVisible(false);\r\n\r\n\t\t\t\t\t\tvar oShowLink = new sap.m.Link({\r\n\t\t\t\t\t\t\ttext: sap.ui.getCore().getLibraryResourceBundle(\"sap.m\").getText(\"MSGBOX_LINK_TITLE\"),\r\n\t\t\t\t\t\t\tpress: function () {\r\n\t\t\t\t\t\t\t\toFT.setVisible(true);\r\n\t\t\t\t\t\t\t\tthis.setVisible(false);\r\n\t\t\t\t\t\t\t\toDialog._setInitialFocus();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\toShowLink.addStyleClass(\"sapMMessageBoxLinkText\");\r\n\t\t\t\t\t\toFT.addStyleClass(\"sapMMessageBoxDetails\");\r\n\r\n\t\t\t\t\t\treturn new sap.m.VBox({\r\n\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\toMessageText,\r\n\t\t\t\t\t\t\t\toShowLink,\r\n\t\t\t\t\t\t\t\toFT\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction onclose() {\r\n\t\t\t\t\t\tif (typeof mOptions.onClose === \"function\") {\r\n\t\t\t\t\t\t\tmOptions.onClose(oResult);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\toDialog.detachAfterClose(onclose);\r\n\t\t\t\t\t\toDialog.destroy();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction getInitialFocusControl() {\r\n\t\t\t\t\t\tvar i = 0;\r\n\t\t\t\t\t\tvar oInitialFocusControl = null;\r\n\t\t\t\t\t\tif (mOptions.initialFocus) {\r\n\t\t\t\t\t\t\tif (mOptions.initialFocus instanceof sap.ui.core.Control) {//covers sap.m.Control cases\r\n\t\t\t\t\t\t\t\toInitialFocusControl = mOptions.initialFocus;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (typeof mOptions.initialFocus === \"string\") {//covers string and MessageBox.Action cases\r\n\t\t\t\t\t\t\t\tfor (i = 0; i < aButtons.length; i++) {\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tif (mOptions.initialFocus.toLowerCase() === aButtons[i].getText().toLowerCase()) {\r\n\t\t\t\t\t\t\t\t\t\t\toInitialFocusControl = aButtons[i];\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn oInitialFocusControl;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (typeof (vMessage) === \"string\") {\r\n\t\t\t\t\t\tvMessageContent = new sap.m.Text({\r\n\t\t\t\t\t\t\t\ttextDirection: mOptions.textDirection\r\n\t\t\t\t\t\t\t}).setText(vMessage).addStyleClass(\"sapMMsgBoxText\");\r\n\r\n\t\t\t\t\t\t// If we have only text we need to keep a reference to it and add it to the aria-labelledby attribute of the dialog.\r\n\t\t\t\t\t\toMessageText = vMessageContent;\r\n\t\t\t\t\t} else if (vMessage instanceof sap.ui.core.Control) {\r\n\t\t\t\t\t\tvMessageContent = vMessage.addStyleClass(\"sapMMsgBoxText\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// If we have additional details, we should wrap the content in a details layout.\r\n\t\t\t\t\tif (mOptions && mOptions.hasOwnProperty(\"details\") && mOptions.details !== \"\") {\r\n\t\t\t\t\t\tvMessageContent = getInformationLayout(mOptions, vMessageContent);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction onOpen () {\r\n\t\t\t\t\t\tif (sap.ui.getCore().getConfiguration().getAccessibility()) {\r\n\t\t\t\t\t\t\toDialog.$().attr(\"role\", \"alertdialog\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\toDialog = new sap.m.Dialog({\r\n\t\t\t\t\t\tid: mOptions.id,\r\n\t\t\t\t\t\ttype: sap.m.DialogType.Message,\r\n\t\t\t\t\t\ttitle: mOptions.title,\r\n\t\t\t\t\t\tcontent: vMessageContent,\r\n\t\t\t\t\t\ticon: mIcons[mOptions.icon],\r\n\t\t\t\t\t\tinitialFocus: getInitialFocusControl(),\r\n\t\t\t\t\t\tverticalScrolling: mOptions.verticalScrolling,\r\n\t\t\t\t\t\thorizontalScrolling: mOptions.horizontalScrolling,\r\n\t\t\t\t\t\tafterOpen: onOpen,\r\n\t\t\t\t\t\tafterClose: onclose,\r\n\t\t\t\t\t\tbuttons: aButtons,\r\n\t\t\t\t\t\tariaLabelledBy: oMessageText ? oMessageText.getId() : undefined,\r\n\t\t\t\t\t\tcontentWidth: mOptions.contentWidth\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (mClasses[mOptions.icon]) {\r\n\t\t\t\t\t\toDialog.addStyleClass(mClasses[mOptions.icon]);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\toDialog.addStyleClass(mClasses.STANDARD);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (mOptions.styleClass) {\r\n\t\t\t\t\t\toDialog.addStyleClass(mOptions.styleClass);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\toDialog.open();\r\n}\r\n\r\n"]}