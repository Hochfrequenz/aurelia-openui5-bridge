{"version":3,"sources":["file-uploader/file-uploader.js"],"names":["bindable","customElement","noView","inject","AttributeManager","getBooleanFromAttributeValue","Ui5FileUploader","Element","element","_upload","defaultFunc","event","addChild","child","elem","path","$","parentsUntil","localName","addItem","setToolbar","setInfoToolbar","addHeaderParameter","removeChildByRelation","relation","removeItem","removeHeaderParameter","attached","attributeManager","sap","m","UploadCollection","fileType","maximumFilenameLength","maximumFileSize","mimeType","multiple","value","name","sameFilenameAllowed","showSeperators","uploadOnChange","uploadUrl","enabled","width","useMultipart","change","fileDeleted","filenameLengthExceeded","fileSizeExceeded","fileAllowed","uploadComplete","uploadAborted","uploadStart","uploadProgress","parents","length","au","controller","viewvalueStatel","addAttributes","placeAt","parentElement","addClasses","detached","removeChild","destroy","fileTypeChanged","newValue","setFileType","maximumFilenameLengthChanged","setMaximumFilenameLength","mimeTypeChanged","setMimeType","multipleChanged","setMultiple","valueChanged","setvalue","nameChanged","setname","sameFilenameAllowedChanged","setSameFilenameAllowed","showSeperatorsChanged","setshowSeperators","uploadOnChangeChanged","setuploadOnChange","uploadUrlChanged","setUploadUrl","enabledChanged","widthChanged","setwidth","valueStateChanged","setvalueState","buttonOnlyChanged","setbuttonOnly","useMultipartChanged","setuseMultipart"],"mappings":"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","file":"../../../file-uploader/file-uploader.js","sourcesContent":["import { bindable, customElement, noView } from 'aurelia-templating';\r\nimport { inject } from 'aurelia-dependency-injection';\r\nimport { AttributeManager } from '../common/attributeManager';\r\nimport { getBooleanFromAttributeValue } from '../common/attributes';\r\n\r\n@customElement('ui5-file-uploader')\r\n@inject(Element)\r\nexport class Ui5FileUploader {\r\n  @bindable() fileType = [];\r\n  @bindable() maximumFilenameLength = null;\r\n  @bindable() maximumFileSize = null;\r\n  @bindable() mimeType = [];\r\n  @bindable() multiple = false;\r\n  @bindable() value = null;\r\n  @bindable() name = null;\r\n  @bindable() sameFilenameAllowed = false;\r\n  @bindable() showSeperators = 'All';\r\n  @bindable() uploadOnChange = true;\r\n  @bindable() uploadUrl = '../../../upload';\r\n  @bindable() enabled = true;\r\n  @bindable() width = null;\r\n  @bindable() valueState = 'None';\r\n  @bindable() buttonOnly = false;\r\n  @bindable() useMultipart = true;\r\n  @bindable() buttonText = null;\r\n  @bindable() sendXHR = false;\r\n  @bindable() placeholder = null;\r\n  @bindable() style = null;\r\n  @bindable() icon = null;\r\n  @bindable() iconHovered = null;\r\n  @bindable() iconSelected = null;\r\n  @bindable() iconFirst = true;\r\n  @bindable() iconOnly = false;\r\n\r\n  @bindable() change = this.defaultFunc;\r\n  @bindable() filenameLengthExceeded = this.defaultFunc;\r\n  @bindable() fileSizeExceeded = this.defaultFunc;\r\n  @bindable() fileAllowed = this.defaultFunc;\r\n  @bindable() uploadComplete = this.defaultFunc;\r\n  @bindable() uploadAborted = this.defaultFunc;\r\n  @bindable() uploadStart = this.defaultFunc;\r\n  @bindable() uploadProgress = this.defaultFunc;\r\n  _upload = null;\r\n  constructor(element) {\r\n    this.element = element;\r\n  }\r\n  defaultFunc(event) {\r\n\r\n  }\r\n  addChild(child, elem) {\r\n    var path = $(elem).parentsUntil(this.element);\r\n    for (elem of path) {\r\n      if (elem.localName == 'items') {\r\n        this._upload.addItem(child);\r\n        return elem.localName;\r\n      }\r\n      else if (elem.localName == 'toolbar') {\r\n        this._upload.setToolbar(child);\r\n        return elem.localName;\r\n      }\r\n      else if (elem.localName == 'infotoolbar') {\r\n        this._upload.setInfoToolbar(child);\r\n        return elem.localName;\r\n      }\r\n      else if (elem.localName == 'parameter') {\r\n        this._upload.addHeaderParameter(child);\r\n        return elem.localName;\r\n      }\r\n    }\r\n  }\r\n  removeChildByRelation(child, relation) {\r\n    if (relation === 'items' && this._upload) {\r\n      this._upload.removeItem(child);\r\n    }\r\n    else if (relation === 'toolbar' && this._upload) {\r\n      this._upload.setToolbar(null);\r\n    }\r\n    else if (relation === 'infotoolbar' && this._upload) {\r\n      this._upload.setInfoToolbar(null);\r\n    }\r\n    else if (relation === 'parameter' && this._upload) {\r\n      this._upload.removeHeaderParameter(null);\r\n    }\r\n  }\r\n  attached() {\r\n    var attributeManager = new AttributeManager(this.element);\r\n    this._upload = new sap.m.UploadCollection({\r\n      fileType: this.fileType,\r\n      maximumFilenameLength: this.maximumFilenameLength,\r\n      maximumFileSize: this.maximumFileSize,\r\n      mimeType: this.mimeType,\r\n      multiple: getBooleanFromAttributeValue(this.multiple),\r\n      value: this.value,\r\n      name: this.name,\r\n      sameFilenameAllowed: getBooleanFromAttributeValue(this.sameFilenameAllowed),\r\n      showSeperators: this.showSeperators,\r\n      uploadOnChange: getBooleanFromAttributeValue(this.uploadOnChange),\r\n      uploadUrl: this.uploadUrl,\r\n      enabled: getBooleanFromAttributeValue(this.enabled),\r\n      width: this.width,\r\n      useMultipart: getBooleanFromAttributeValue(this.useMultipart),\r\n      change: this.change,\r\n      fileDeleted: this.fileDeleted,\r\n      filenameLengthExceeded: this.filenameLengthExceeded,\r\n      fileSizeExceeded: this.fileSizeExceeded,\r\n      fileAllowed: this.fileAllowed,\r\n      uploadComplete: this.uploadComplete,\r\n      uploadAborted: this.uploadAborted,\r\n      uploadStart: this.uploadStart,\r\n      uploadProgress: this.uploadProgress\r\n    });\r\n\r\n    if ($(this.element).parents(\"[ui5-container]\").length > 0) {\r\n      $(this.element).parents(\"[ui5-container]\")[0].au.controller.viewvalueStatel.addChild(this._upload, this.element);\r\n      attributeManager.addAttributes({ \"ui5-container\": '' });\r\n    }\r\n    else {\r\n      this._upload.placeAt(this.element.parentElement);\r\n      attributeManager.addAttributes({ \"ui5-container\": '' });\r\n      attributeManager.addClasses(\"ui5-hide\");\r\n    }\r\n  }\r\n  detached() {\r\n    if ($(this.element).parents(\"[ui5-container]\").length > 0) {\r\n      $(this.element).parents(\"[ui5-container]\")[0].au.controller.viewvalueStatel.removeChild(this._upload, this.element);\r\n    }\r\n    else {\r\n      this._upload.destroy();\r\n    }\r\n  }\r\n  fileTypeChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setFileType(newValue);\r\n    }\r\n  }\r\n  maximumFilenameLengthChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setMaximumFilenameLength(newValue);\r\n    }\r\n  }\r\n  mimeTypeChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setMimeType(newValue);\r\n    }\r\n  }\r\n  multipleChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setMultiple(getBooleanFromAttributeValue(newValue));\r\n    }\r\n  }\r\n  valueChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setvalue(newValue);\r\n    }\r\n  }\r\n  nameChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setname(newValue);\r\n    }\r\n  }\r\n  sameFilenameAllowedChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setSameFilenameAllowed(getBooleanFromAttributeValue(newValue));\r\n    }\r\n  }\r\n  showSeperatorsChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setshowSeperators(getBooleanFromAttributeValue(newValue));\r\n    }\r\n  }\r\n  uploadOnChangeChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setuploadOnChange(getBooleanFromAttributeValue(newValue));\r\n    }\r\n  }\r\n  uploadUrlChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setUploadUrl(newValue);\r\n    }\r\n  }\r\n  enabledChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      //not supported by OpenUI5 (yet)\r\n      //this._upload.setenabled(getBooleanFromAttributeValue(newValue));\r\n    }\r\n  }\r\n  widthChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setwidth(newValue);\r\n    }\r\n  }\r\n  valueStateChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setvalueState(newValue);\r\n    }\r\n  }\r\n  buttonOnlyChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setbuttonOnly(getBooleanFromAttributeValue(newValue));\r\n    }\r\n  }\r\n  useMultipartChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setuseMultipart(getBooleanFromAttributeValue(newValue));\r\n    }\r\n  }\r\n\r\n  /*TODO: Add change bindings for event handlers */\r\n}\r\n"]}