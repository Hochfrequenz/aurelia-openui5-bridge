{"version":3,"sources":["upload-collection/upload-collection.js"],"names":["bindable","customElement","noView","inject","AttributeManager","getBooleanFromAttributeValue","Ui5UploadCollection","Element","element","_upload","defaultFunc","event","addChild","child","elem","path","$","parentsUntil","localName","addItem","setToolbar","setInfoToolbar","addHeaderParameter","removeChildByRelation","relation","removeItem","removeHeaderParameter","attached","attributeManager","sap","m","UploadCollection","fileType","maximumFilenameLength","maximumFileSize","mimeType","multiple","noDataText","noDataDescription","sameFilenameAllowed","showSeperators","uploadEnabled","uploadUrl","instantUpload","numberOfAttachmentsText","terminationEnabled","change","fileDeleted","filenameLengthExceeded","fileSizeExceeded","typeMismatch","uploadComplete","uploadTerminated","beforeUploadStarts","selectionChange","parents","length","au","controller","viewModel","addAttributes","placeAt","parentElement","addClasses","detached","removeChild","destroy","fileTypeChanged","newValue","setFileType","maximumFilenameLengthChanged","setMaximumFilenameLength","mimeTypeChanged","setMimeType","multipleChanged","setMultiple","noDataTextChanged","setNoDataText","noDataDescriptionChanged","setNoDataDescription","sameFilenameAllowedChanged","setSameFilenameAllowed","showSeperatorsChanged","setshowSeperators","uploadEnabledChanged","setUploadEnabled","uploadUrlChanged","setUploadUrl","instantUploadChanged","numberOfAttachmentsTextChanged","setNumberOfAttachmentsText","modeChanged","setMode","uploadButtonVisibleChanged","setUploadButtonVisible","terminationEnabledChanged","setTerminationEnabled"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,c,sBAAAA,Q;AAAUC,mB,sBAAAA,a;AAAeC,Y,sBAAAA,M;;AACzBC,Y,+BAAAA,M;;AACAC,sB,2BAAAA,gB;;AACAC,kC,qBAAAA,4B;;;qCAIIC,mB,WAFZL,cAAc,uBAAd,C,UACAE,OAAOI,OAAP,C,UAEEP,U,UACAA,U,UACAA,U,UACAA,U,UACAA,U,UACAA,U,UACAA,U,WACAA,U,WACAA,U,WACAA,U,WACAA,U,WACAA,U,WACAA,U,WACAA,U,WACAA,U,WACAA,U,WAEAA,U,WACAA,U,WACAA,U,WACAA,U,WACAA,U,WACAA,U,WACAA,U,WACAA,U,WACAA,U,WACAA,U;AAED,qCAAYQ,OAAZ,EAAqB;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eADrBC,OACqB,GADX,IACW;;AACnB,eAAKD,OAAL,GAAeA,OAAf;AACD;;sCACDE,W,wBAAYC,K,EAAO,CAElB,C;;sCACDC,Q,qBAASC,K,EAAOC,I,EAAM;AACpB,cAAIC,OAAOC,EAAEF,IAAF,EAAQG,YAAR,CAAqB,KAAKT,OAA1B,CAAX;AACA,+BAAaO,IAAb,kHAAmB;AAAA;AAAA;AAAdD,kBAAc;AAAA;AAAA;AAAA;AAAdA,kBAAc;AAAA;;AACjB,gBAAIA,KAAKI,SAAL,IAAkB,OAAtB,EAA+B;AAC7B,mBAAKT,OAAL,CAAaU,OAAb,CAAqBN,KAArB;AACA,qBAAOC,KAAKI,SAAZ;AACD,aAHD,MAIK,IAAIJ,KAAKI,SAAL,IAAkB,SAAtB,EAAiC;AACpC,mBAAKT,OAAL,CAAaW,UAAb,CAAwBP,KAAxB;AACA,qBAAOC,KAAKI,SAAZ;AACD,aAHI,MAIA,IAAIJ,KAAKI,SAAL,IAAkB,aAAtB,EAAqC;AACxC,mBAAKT,OAAL,CAAaY,cAAb,CAA4BR,KAA5B;AACA,qBAAOC,KAAKI,SAAZ;AACD,aAHI,MAIA,IAAIJ,KAAKI,SAAL,IAAkB,WAAtB,EAAmC;AACtC,mBAAKT,OAAL,CAAaa,kBAAb,CAAgCT,KAAhC;AACA,qBAAOC,KAAKI,SAAZ;AACD;AACF;AACF,S;;sCACDK,qB,kCAAsBV,K,EAAOW,Q,EAAU;AACrC,cAAIA,aAAa,OAAb,IAAwB,KAAKf,OAAjC,EAA0C;AACxC,iBAAKA,OAAL,CAAagB,UAAb,CAAwBZ,KAAxB;AACD,WAFD,MAGK,IAAIW,aAAa,SAAb,IAA0B,KAAKf,OAAnC,EAA4C;AAC/C,iBAAKA,OAAL,CAAaW,UAAb,CAAwB,IAAxB;AACD,WAFI,MAGA,IAAII,aAAa,aAAb,IAA8B,KAAKf,OAAvC,EAAgD;AACnD,iBAAKA,OAAL,CAAaY,cAAb,CAA4B,IAA5B;AACD,WAFI,MAGA,IAAIG,aAAa,WAAb,IAA4B,KAAKf,OAArC,EAA8C;AACjD,iBAAKA,OAAL,CAAaiB,qBAAb,CAAmC,IAAnC;AACD;AACF,S;;sCACDC,Q,uBAAW;AACT,cAAIC,mBAAmB,IAAIxB,gBAAJ,CAAqB,KAAKI,OAA1B,CAAvB;AACA,eAAKC,OAAL,GAAe,IAAIoB,IAAIC,CAAJ,CAAMC,gBAAV,CAA2B;AACxCC,sBAAU,KAAKA,QADyB;AAExCC,mCAAuB,KAAKA,qBAFY;AAGxCC,6BAAiB,KAAKA,eAHkB;AAIxCC,sBAAU,KAAKA,QAJyB;AAKxCC,sBAAU/B,6BAA6B,KAAK+B,QAAlC,CAL8B;AAMxCC,wBAAY,KAAKA,UANuB;AAOxCC,+BAAmB,KAAKA,iBAPgB;AAQxCC,iCAAqBlC,6BAA6B,KAAKkC,mBAAlC,CARmB;AASxCC,4BAAgB,KAAKA,cATmB;AAUxCC,2BAAepC,6BAA6B,KAAKoC,aAAlC,CAVyB;AAWxCC,uBAAW,KAAKA,SAXwB;AAYxCC,2BAAetC,6BAA6B,KAAKsC,aAAlC,CAZyB;AAaxCC,qCAAyB,KAAKA,uBAbU;AAcxCC,gCAAoBxC,6BAA6B,KAAKwC,kBAAlC,CAdoB;AAexCC,oBAAQ,KAAKA,MAf2B;AAgBxCC,yBAAa,KAAKA,WAhBsB;AAiBxCC,oCAAwB,KAAKA,sBAjBW;AAkBxCC,8BAAkB,KAAKA,gBAlBiB;AAmBxCC,0BAAc,KAAKA,YAnBqB;AAoBxCC,4BAAgB,KAAKA,cApBmB;AAqBxCC,8BAAkB,KAAKA,gBArBiB;AAsBxCC,gCAAoB,KAAKA,kBAtBe;AAuBxCC,6BAAiB,KAAKA;AAvBkB,WAA3B,CAAf;;AA0BA,cAAItC,EAAE,KAAKR,OAAP,EAAgB+C,OAAhB,CAAwB,iBAAxB,EAA2CC,MAA3C,GAAoD,CAAxD,EAA2D;AACzDxC,cAAE,KAAKR,OAAP,EAAgB+C,OAAhB,CAAwB,iBAAxB,EAA2C,CAA3C,EAA8CE,EAA9C,CAAiDC,UAAjD,CAA4DC,SAA5D,CAAsE/C,QAAtE,CAA+E,KAAKH,OAApF,EAA6F,KAAKD,OAAlG;AACAoB,6BAAiBgC,aAAjB,CAA+B,EAAE,iBAAiB,EAAnB,EAA/B;AACD,WAHD,MAIK;AACH,iBAAKnD,OAAL,CAAaoD,OAAb,CAAqB,KAAKrD,OAAL,CAAasD,aAAlC;AACAlC,6BAAiBgC,aAAjB,CAA+B,EAAE,iBAAiB,EAAnB,EAA/B;AACAhC,6BAAiBmC,UAAjB,CAA4B,UAA5B;AACD;AACF,S;;sCACDC,Q,uBAAW;AACT,cAAIhD,EAAE,KAAKR,OAAP,EAAgB+C,OAAhB,CAAwB,iBAAxB,EAA2CC,MAA3C,GAAoD,CAAxD,EAA2D;AACzDxC,cAAE,KAAKR,OAAP,EAAgB+C,OAAhB,CAAwB,iBAAxB,EAA2C,CAA3C,EAA8CE,EAA9C,CAAiDC,UAAjD,CAA4DC,SAA5D,CAAsEM,WAAtE,CAAkF,KAAKxD,OAAvF,EAAgG,KAAKD,OAArG;AACD,WAFD,MAGK;AACH,iBAAKC,OAAL,CAAayD,OAAb;AACD;AACF,S;;sCACDC,e,4BAAgBC,Q,EAAU;AACxB,cAAI,KAAK3D,OAAL,KAAiB,IAArB,EAA2B;AACzB,iBAAKA,OAAL,CAAa4D,WAAb,CAAyBD,QAAzB;AACD;AACF,S;;sCACDE,4B,yCAA6BF,Q,EAAU;AACrC,cAAI,KAAK3D,OAAL,KAAiB,IAArB,EAA2B;AACzB,iBAAKA,OAAL,CAAa8D,wBAAb,CAAsCH,QAAtC;AACD;AACF,S;;sCACDI,e,4BAAgBJ,Q,EAAU;AACxB,cAAI,KAAK3D,OAAL,KAAiB,IAArB,EAA2B;AACzB,iBAAKA,OAAL,CAAagE,WAAb,CAAyBL,QAAzB;AACD;AACF,S;;sCACDM,e,4BAAgBN,Q,EAAU;AACxB,cAAI,KAAK3D,OAAL,KAAiB,IAArB,EAA2B;AACzB,iBAAKA,OAAL,CAAakE,WAAb,CAAyBtE,6BAA6B+D,QAA7B,CAAzB;AACD;AACF,S;;sCACDQ,iB,8BAAkBR,Q,EAAU;AAC1B,cAAI,KAAK3D,OAAL,KAAiB,IAArB,EAA2B;AACzB,iBAAKA,OAAL,CAAaoE,aAAb,CAA2BT,QAA3B;AACD;AACF,S;;sCACDU,wB,qCAAyBV,Q,EAAU;AACjC,cAAI,KAAK3D,OAAL,KAAiB,IAArB,EAA2B;AACzB,iBAAKA,OAAL,CAAasE,oBAAb,CAAkCX,QAAlC;AACD;AACF,S;;sCACDY,0B,uCAA2BZ,Q,EAAU;AACnC,cAAI,KAAK3D,OAAL,KAAiB,IAArB,EAA2B;AACzB,iBAAKA,OAAL,CAAawE,sBAAb,CAAoC5E,6BAA6B+D,QAA7B,CAApC;AACD;AACF,S;;sCACDc,qB,kCAAsBd,Q,EAAU;AAC9B,cAAI,KAAK3D,OAAL,KAAiB,IAArB,EAA2B;AACzB,iBAAKA,OAAL,CAAa0E,iBAAb,CAA+B9E,6BAA6B+D,QAA7B,CAA/B;AACD;AACF,S;;sCACDgB,oB,iCAAqBhB,Q,EAAU;AAC7B,cAAI,KAAK3D,OAAL,KAAiB,IAArB,EAA2B;AACzB,iBAAKA,OAAL,CAAa4E,gBAAb,CAA8BhF,6BAA6B+D,QAA7B,CAA9B;AACD;AACF,S;;sCACDkB,gB,6BAAiBlB,Q,EAAU;AACzB,cAAI,KAAK3D,OAAL,KAAiB,IAArB,EAA2B;AACzB,iBAAKA,OAAL,CAAa8E,YAAb,CAA0BnB,QAA1B;AACD;AACF,S;;sCACDoB,oB,iCAAqBpB,Q,EAAU;AAC7B,cAAI,KAAK3D,OAAL,KAAiB,IAArB,EAA2B,CAG1B;AACF,S;;sCACDgF,8B,2CAA+BrB,Q,EAAU;AACvC,cAAI,KAAK3D,OAAL,KAAiB,IAArB,EAA2B;AACzB,iBAAKA,OAAL,CAAaiF,0BAAb,CAAwCtB,QAAxC;AACD;AACF,S;;sCACDuB,W,wBAAYvB,Q,EAAU;AACpB,cAAI,KAAK3D,OAAL,KAAiB,IAArB,EAA2B;AACzB,iBAAKA,OAAL,CAAamF,OAAb,CAAqBxB,QAArB;AACD;AACF,S;;sCACDyB,0B,uCAA2BzB,Q,EAAU;AACnC,cAAI,KAAK3D,OAAL,KAAiB,IAArB,EAA2B;AACzB,iBAAKA,OAAL,CAAaqF,sBAAb,CAAoCzF,6BAA6B+D,QAA7B,CAApC;AACD;AACF,S;;sCACD2B,yB,sCAA0B3B,Q,EAAU;AAClC,cAAI,KAAK3D,OAAL,KAAiB,IAArB,EAA2B;AACzB,iBAAKA,OAAL,CAAauF,qBAAb,CAAmC3F,6BAA6B+D,QAA7B,CAAnC;AACD;AACF,S;;;;;;iBA9LsB,E;;;;;iBACa,I;;;;;iBACN,I;;;;;iBACP,E;;;;;iBACA,K;;;;;iBACE,I;;;;;iBACO,I;;;;;iBACE,K;;;;;iBACL,K;;;;;iBACD,I;;;;;iBACJ,iB;;;;;iBACI,I;;;;;iBACU,I;;;;;iBACnB,M;;;;;iBACe,K;;;;;iBACD,I;;;;;iBAEZ,KAAK1D,W;;;;;iBACA,KAAKA,W;;;;;iBACM,KAAKA,W;;;;;iBAChB,KAAKA,W;;;;;iBACA,KAAKA,W;;;;;iBACT,KAAKA,W;;;;;iBACH,KAAKA,W;;;;;iBACH,KAAKA,W;;;;;iBACH,KAAKA,W;;;;;iBACR,KAAKA,W","file":"../../../upload-collection/upload-collection.js","sourcesContent":["import { bindable, customElement, noView } from 'aurelia-templating';\r\nimport { inject } from 'aurelia-dependency-injection';\r\nimport { AttributeManager } from '../common/attributeManager';\r\nimport { getBooleanFromAttributeValue } from '../common/attributes';\r\n\r\n@customElement('ui5-upload-collection')\r\n@inject(Element)\r\nexport class Ui5UploadCollection {\r\n  @bindable() fileType = [];\r\n  @bindable() maximumFilenameLength = null;\r\n  @bindable() maximumFileSize = null;\r\n  @bindable() mimeType = [];\r\n  @bindable() multiple = false;\r\n  @bindable() noDataText = null;\r\n  @bindable() noDataDescription = null;\r\n  @bindable() sameFilenameAllowed = false;\r\n  @bindable() showSeperators = 'All';\r\n  @bindable() uploadEnabled = true;\r\n  @bindable() uploadUrl = '../../../upload';\r\n  @bindable() instantUpload = true;\r\n  @bindable() numberOfAttachmentsText = null;\r\n  @bindable() mode = 'None';\r\n  @bindable() uploadButtonVisible = false;\r\n  @bindable() terminationEnabled = true;\r\n\r\n  @bindable() change = this.defaultFunc;\r\n  @bindable() fileDeleted = this.defaultFunc;\r\n  @bindable() filenameLengthExceeded = this.defaultFunc;\r\n  @bindable() fileRenamed = this.defaultFunc;\r\n  @bindable() fileSizeExceeded = this.defaultFunc;\r\n  @bindable() typeMismatch = this.defaultFunc;\r\n  @bindable() uploadComplete = this.defaultFunc;\r\n  @bindable() uploadTerminated = this.defaultFunc;\r\n  @bindable() beforeUploadStarts = this.defaultFunc;\r\n  @bindable() selectionChange = this.defaultFunc;\r\n  _upload = null;\r\n  constructor(element) {\r\n    this.element = element;\r\n  }\r\n  defaultFunc(event) {\r\n\r\n  }\r\n  addChild(child, elem) {\r\n    var path = $(elem).parentsUntil(this.element);\r\n    for (elem of path) {\r\n      if (elem.localName == 'items') {\r\n        this._upload.addItem(child);\r\n        return elem.localName;\r\n      }\r\n      else if (elem.localName == 'toolbar') {\r\n        this._upload.setToolbar(child);\r\n        return elem.localName;\r\n      }\r\n      else if (elem.localName == 'infotoolbar') {\r\n        this._upload.setInfoToolbar(child);\r\n        return elem.localName;\r\n      }\r\n      else if (elem.localName == 'parameter') {\r\n        this._upload.addHeaderParameter(child);\r\n        return elem.localName;\r\n      }\r\n    }\r\n  }\r\n  removeChildByRelation(child, relation) {\r\n    if (relation === 'items' && this._upload) {\r\n      this._upload.removeItem(child);\r\n    }\r\n    else if (relation === 'toolbar' && this._upload) {\r\n      this._upload.setToolbar(null);\r\n    }\r\n    else if (relation === 'infotoolbar' && this._upload) {\r\n      this._upload.setInfoToolbar(null);\r\n    }\r\n    else if (relation === 'parameter' && this._upload) {\r\n      this._upload.removeHeaderParameter(null);\r\n    }\r\n  }\r\n  attached() {\r\n    var attributeManager = new AttributeManager(this.element);\r\n    this._upload = new sap.m.UploadCollection({\r\n      fileType: this.fileType,\r\n      maximumFilenameLength: this.maximumFilenameLength,\r\n      maximumFileSize: this.maximumFileSize,\r\n      mimeType: this.mimeType,\r\n      multiple: getBooleanFromAttributeValue(this.multiple),\r\n      noDataText: this.noDataText,\r\n      noDataDescription: this.noDataDescription,\r\n      sameFilenameAllowed: getBooleanFromAttributeValue(this.sameFilenameAllowed),\r\n      showSeperators: this.showSeperators,\r\n      uploadEnabled: getBooleanFromAttributeValue(this.uploadEnabled),\r\n      uploadUrl: this.uploadUrl,\r\n      instantUpload: getBooleanFromAttributeValue(this.instantUpload),\r\n      numberOfAttachmentsText: this.numberOfAttachmentsText,\r\n      terminationEnabled: getBooleanFromAttributeValue(this.terminationEnabled),\r\n      change: this.change,\r\n      fileDeleted: this.fileDeleted,\r\n      filenameLengthExceeded: this.filenameLengthExceeded,\r\n      fileSizeExceeded: this.fileSizeExceeded,\r\n      typeMismatch: this.typeMismatch,\r\n      uploadComplete: this.uploadComplete,\r\n      uploadTerminated: this.uploadTerminated,\r\n      beforeUploadStarts: this.beforeUploadStarts,\r\n      selectionChange: this.selectionChange\r\n    });\r\n\r\n    if ($(this.element).parents(\"[ui5-container]\").length > 0) {\r\n      $(this.element).parents(\"[ui5-container]\")[0].au.controller.viewModel.addChild(this._upload, this.element);\r\n      attributeManager.addAttributes({ \"ui5-container\": '' });\r\n    }\r\n    else {\r\n      this._upload.placeAt(this.element.parentElement);\r\n      attributeManager.addAttributes({ \"ui5-container\": '' });\r\n      attributeManager.addClasses(\"ui5-hide\");\r\n    }\r\n  }\r\n  detached() {\r\n    if ($(this.element).parents(\"[ui5-container]\").length > 0) {\r\n      $(this.element).parents(\"[ui5-container]\")[0].au.controller.viewModel.removeChild(this._upload, this.element);\r\n    }\r\n    else {\r\n      this._upload.destroy();\r\n    }\r\n  }\r\n  fileTypeChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setFileType(newValue);\r\n    }\r\n  }\r\n  maximumFilenameLengthChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setMaximumFilenameLength(newValue);\r\n    }\r\n  }\r\n  mimeTypeChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setMimeType(newValue);\r\n    }\r\n  }\r\n  multipleChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setMultiple(getBooleanFromAttributeValue(newValue));\r\n    }\r\n  }\r\n  noDataTextChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setNoDataText(newValue);\r\n    }\r\n  }\r\n  noDataDescriptionChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setNoDataDescription(newValue);\r\n    }\r\n  }\r\n  sameFilenameAllowedChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setSameFilenameAllowed(getBooleanFromAttributeValue(newValue));\r\n    }\r\n  }\r\n  showSeperatorsChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setshowSeperators(getBooleanFromAttributeValue(newValue));\r\n    }\r\n  }\r\n  uploadEnabledChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setUploadEnabled(getBooleanFromAttributeValue(newValue));\r\n    }\r\n  }\r\n  uploadUrlChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setUploadUrl(newValue);\r\n    }\r\n  }\r\n  instantUploadChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      //not supported by OpenUI5 (yet)\r\n      //this._upload.setInstantUpload(getBooleanFromAttributeValue(newValue));\r\n    }\r\n  }\r\n  numberOfAttachmentsTextChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setNumberOfAttachmentsText(newValue);\r\n    }\r\n  }\r\n  modeChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setMode(newValue);\r\n    }\r\n  }\r\n  uploadButtonVisibleChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setUploadButtonVisible(getBooleanFromAttributeValue(newValue));\r\n    }\r\n  }\r\n  terminationEnabledChanged(newValue) {\r\n    if (this._upload !== null) {\r\n      this._upload.setTerminationEnabled(getBooleanFromAttributeValue(newValue));\r\n    }\r\n  }\r\n\r\n  /*TODO: Add change bindings for event handlers */\r\n}\r\n"]}