{"version":3,"sources":["select/select.js"],"names":["bindable","customElement","noView","inject","AttributeManager","getBooleanFromAttributeValue","Ui5InputBase","Ui5Select","Element","addChild","child","elem","path","jQuery","makeArray","$","parentsUntil","element","localName","_select","getItemByKey","mProperties","key","addItem","oldVal","selectedKey","removeChildByRelation","relation","removeItem","defaultFunc","attached","attributeManager","params","name","width","maxWidth","enabled","selectedItemId","icon","type","autoAdjustWidth","textAlign","textDirection","valueState","valueStateText","showSecondaryValues","forceSelection","items","selectedItem","change","ui5Id","sap","m","Select","closest","au","controller","viewModel","addAttributes","that","attachChange","event","mParameters","addEventDelegate","nameChanged","newValue","setName","enabledChanged","setEnabled","widthChanged","setWidth","maxWidthChanged","setMaxWidth","selectedKeyChanged","setSelectedKey","selectedItemIdChanged","setSelectedItemId","iconChanged","setIcon","typeChanged","setType","autoAdjustWidthChanged","setAutoAdjustWidth","textAlignChanged","setTextAlign","textDirectionChanged","setTextDirection","valueStateChanged","setValueState","valueStateTextChanged","setValueStateText","showSecondaryValuesChanged","setShowSecondaryValues","forceSelectionChanged","setForceSelection"],"mappings":"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","file":"../../../select/select.js","sourcesContent":["import { bindable, customElement, noView } from 'aurelia-templating';\r\nimport { inject } from 'aurelia-dependency-injection';\r\nimport { AttributeManager } from '../common/attributeManager';\r\nimport { getBooleanFromAttributeValue } from '../common/attributes';\r\nimport { Ui5InputBase } from '../input-base/input-base';\r\n@customElement('ui5-select')\r\n@inject(Element)\r\n\r\nexport class Ui5Select {\r\n  _select = null;\r\n  @bindable() ui5Id = null;\r\n\r\n  @bindable() name = null;\r\n  @bindable() width = null;\r\n  @bindable() maxWidth = null;\r\n  @bindable() enabled = true;\r\n  @bindable() selectedKey = null;\r\n  @bindable() selectedItemId = null;\r\n  @bindable() icon = null;\r\n  @bindable() type = null;\r\n  @bindable() autoAdjustWidth = false;\r\n  @bindable() valueState = null;\r\n  @bindable() valueStateText = null;\r\n  @bindable() showSecondaryValues = false;\r\n  @bindable() forceSelection = true;\r\n\r\n  @bindable() items = [];\r\n\r\n  @bindable() selectedItem = null;\r\n\r\n  @bindable() change = this.defaultFunc;\r\n  get UIElement() {\r\n    return this._select;\r\n  }\r\n  addChild(child, elem) {\r\n    var path = jQuery.makeArray($(elem).parentsUntil(this.element));\r\n    for (elem of path) {\r\n      if (elem.localName == 'item') {\r\n        //if (this._select.getItems().length) // set key when first item is added\r\n        //  this.selectedKey = child.mProperties.key;\r\n        if (this._select.getItemByKey(child.mProperties.key) == null)\r\n          this._select.addItem(child);\r\n        //reset selected key\r\n        var oldVal = this.selectedKey;\r\n        this.selectedKey = null;\r\n        this.selectedKey = oldVal;\r\n        return elem.localName;\r\n      }\r\n      break;\r\n    }\r\n  }\r\n  removeChildByRelation(child, relation) {\r\n    if (relation === 'item') {\r\n      this._select.removeItem(child);\r\n      var oldVal = this.selectedKey;\r\n      this.selectedKey = null;\r\n      this.selectedKey = oldVal;\r\n    }\r\n  }\r\n  constructor(element) {\r\n    this.element = element;\r\n  }\r\n  defaultFunc() {\r\n\r\n  }\r\n  attached() {\r\n    var attributeManager = new AttributeManager(this.element);\r\n    var params = {\r\n      name: this.name,\r\n      width: this.width,\r\n      maxWidth: this.maxWidth,\r\n      enabled: getBooleanFromAttributeValue(this.enabled),\r\n      selectedKey: this.selectedKey,\r\n      selectedItemId: this.selectedItemId,\r\n      icon: this.icon,\r\n      type: this.type,\r\n      autoAdjustWidth: getBooleanFromAttributeValue(this.autoAdjustWidth),\r\n      textAlign: this.textAlign,\r\n      textDirection: this.textDirection,\r\n      valueState: this.valueState,\r\n      valueStateText: this.valueStateText,\r\n      showSecondaryValues: getBooleanFromAttributeValue(this.showSecondaryValues),\r\n      forceSelection: getBooleanFromAttributeValue(this.forceSelection),\r\n      items: this.items,\r\n      selectedItem: this.selectedItem,\r\n      change: this.change\r\n    };\r\n    if (this.ui5Id)\r\n      this._select = new sap.m.Select(this.ui5Id, params);\r\n    else\r\n      this._select = new sap.m.Select(params);\r\n    $(this.element).closest(\"[ui5-container]\")[0].au.controller.viewModel.addChild(this._select, this.element);\r\n    attributeManager.addAttributes({ \"ui5-container\": '' });\r\n    var that = this;\r\n    this._select.attachChange((event) => {\r\n      that.selectedItem = event.mParameters.selectedItem;\r\n      if (event.mParameters.selectedItem)\r\n        that.selectedKey = event.mParameters.selectedItem.mProperties.key;\r\n      else\r\n        that.selectedKey = null;\r\n    });\r\n\r\n    this._select.addEventDelegate(this.element);\r\n  }\r\n  nameChanged(newValue) {\r\n    if (this._select !== null) {\r\n      this._select.setName(newValue);\r\n    }\r\n  }\r\n  enabledChanged(newValue) {\r\n    if (this._select !== null) {\r\n      this._select.setEnabled(getBooleanFromAttributeValue(newValue));\r\n    }\r\n  }\r\n  widthChanged(newValue) {\r\n    if (this._select !== null) {\r\n      this._select.setWidth(newValue);\r\n    }\r\n  }\r\n  maxWidthChanged(newValue) {\r\n    if (this._select !== null) {\r\n      this._select.setMaxWidth(newValue);\r\n    }\r\n  }\r\n\r\n  selectedKeyChanged(newValue) {\r\n    if (this._select !== null) {\r\n      this._select.setSelectedKey(newValue);\r\n    }\r\n  }\r\n  selectedItemIdChanged(newValue) {\r\n    if (this._select !== null) {\r\n      this._select.setSelectedItemId(newValue);\r\n    }\r\n  }\r\n\r\n  iconChanged(newValue) {\r\n    if (this._select !== null) {\r\n      this._select.setIcon(newValue);\r\n    }\r\n  }\r\n\r\n  typeChanged(newValue) {\r\n    if (this._select !== null) {\r\n      this._select.setType(newValue);\r\n    }\r\n  }\r\n  autoAdjustWidthChanged(newValue) {\r\n    if (this._select !== null) {\r\n      this._select.setAutoAdjustWidth(getBooleanFromAttributeValue(newValue));\r\n    }\r\n  }\r\n  textAlignChanged(newValue) {\r\n    if (this._select !== null) {\r\n      this._select.setTextAlign(newValue);\r\n    }\r\n  }\r\n  textDirectionChanged(newValue) {\r\n    if (this._select !== null) {\r\n      this._select.setTextDirection(newValue);\r\n    }\r\n  }\r\n  valueStateChanged(newValue) {\r\n    if (this._select !== null) {\r\n      this._select.setValueState(newValue);\r\n    }\r\n  }\r\n  valueStateTextChanged(newValue) {\r\n    if (this._select !== null) {\r\n      this._select.setValueStateText(newValue);\r\n    }\r\n  }\r\n\r\n  showSecondaryValuesChanged(newValue) {\r\n    if (this._select !== null) {\r\n      this._select.setShowSecondaryValues(getBooleanFromAttributeValue(newValue));\r\n    }\r\n  }\r\n\r\n  forceSelectionChanged(newValue) {\r\n    if (this._select !== null) {\r\n      this._select.setForceSelection(getBooleanFromAttributeValue(newValue));\r\n    }\r\n  }\r\n}\r\n"]}