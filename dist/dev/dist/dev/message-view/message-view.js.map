{"version":3,"sources":["message-view/message-view.js"],"names":["bindable","customElement","noView","inject","AttributeManager","getBooleanFromAttributeValue","computedFrom","Ui5MessageView","Element","element","_view","_parent","_relation","defaultFunc","addChild","child","elem","path","jQuery","makeArray","$","parentsUntil","localName","addItem","removeChildByRelation","relation","removeItem","attached","attributeManager","sap","m","MessageView","asyncDescriptionHandler","asyncURLHandler","groupItems","removeAttribute","closest","length","prevSibling","previousElementSibling","au","controller","viewModel","UIElement","addAttributes","placeAt","parentElement","addClasses","detached","removeAttributes","destroy","textChanged","newValue","setText"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,c,sBAAAA,Q;AAAUC,mB,sBAAAA,a;AAAeC,Y,sBAAAA,M;;AACzBC,Y,+BAAAA,M;;AACAC,sB,2BAAAA,gB;;AACAC,kC,qBAAAA,4B;;AACAC,kB,qBAAAA,Y;;;;;;;;;;;;;;;;;;;;;gCAIIC,c,WAHZN,cAAc,kBAAd,C,UACAE,OAAOK,OAAP,C,UAMER,U,UACAA,U,UACAA,U,UACAA,U,UAOAM,aAAa,OAAb,C;AAND,gCAAYG,OAAZ,EAAqB;AAAA;;AAAA,eAPrBC,KAOqB,GAPb,IAOa;AAAA,eANrBC,OAMqB,GANX,IAMW;AAAA,eALrBC,SAKqB,GALT,IAKS;;AAAA;;AAAA;;AAAA;;AAAA;;AACnB,eAAKH,OAAL,GAAeA,OAAf;AACD;;iCACDI,W,0BAAc,CAEb,C;;iCAKDC,Q,qBAASC,K,EAAOC,I,EAAM;AACpB,cAAIC,OAAOC,OAAOC,SAAP,CAAiBC,EAAEJ,IAAF,EAAQK,YAAR,CAAqB,KAAKZ,OAA1B,CAAjB,CAAX;AACA,+BAAaQ,IAAb,kHAAmB;AAAA;AAAA;AAAdD,kBAAc;AAAA;AAAA;AAAA;AAAdA,kBAAc;AAAA;;AACjB,gBAAIA,KAAKM,SAAL,IAAkB,OAAtB,EAA+B;AAC7B,mBAAKZ,KAAL,CAAWa,OAAX,CAAmBR,KAAnB;AACA,qBAAOC,KAAKM,SAAZ;AACD;AACF;AACF,S;;iCACDE,qB,kCAAsBT,K,EAAOU,Q,EAAU;AACrC,cAAIA,aAAa,OAAb,IAAwB,KAAKf,KAA7B,IAAsCK,KAA1C,EAAiD;AAC/C,iBAAKL,KAAL,CAAWgB,UAAX,CAAsBX,KAAtB;AACD;AACF,S;;iCACDY,Q,uBAAW;AACT,cAAIC,mBAAmB,IAAIxB,gBAAJ,CAAqB,KAAKK,OAA1B,CAAvB;AACA,eAAKC,KAAL,GAAa,IAAImB,IAAIC,CAAJ,CAAMC,WAAV,CAAsB;AACjCC,qCAAyB,KAAKA,uBADG;AAEjCC,6BAAiB,KAAKA,eAFW;AAGjCC,wBAAY7B,6BAA6B,KAAK6B,UAAlC;AAHqB,WAAtB,CAAb;AAKA,eAAKzB,OAAL,CAAa0B,eAAb,CAA6B,eAA7B;AACA,cAAIf,EAAE,KAAKX,OAAP,EAAgB2B,OAAhB,CAAwB,iBAAxB,EAA2CC,MAA3C,GAAoD,CAAxD,EAA2D;AACzD,gBAAIC,cAAc,IAAlB;AACA,gBAAI,KAAK7B,OAAL,CAAa8B,sBAAjB,EACED,cAAc,KAAK7B,OAAL,CAAa8B,sBAAb,CAAoCC,EAApC,CAAuCC,UAAvC,CAAkDC,SAAlD,CAA4DC,SAA1E;AACF,iBAAKhC,OAAL,GAAeS,EAAE,KAAKX,OAAP,EAAgB2B,OAAhB,CAAwB,iBAAxB,EAA2C,CAA3C,EAA8CI,EAA9C,CAAiDC,UAAjD,CAA4DC,SAA3E;AACA,iBAAK9B,SAAL,GAAiB,KAAKD,OAAL,CAAaG,QAAb,CAAsB,KAAKJ,KAA3B,EAAkC,KAAKD,OAAvC,EAAgD6B,WAAhD,CAAjB;AACAV,6BAAiBgB,aAAjB,CAA+B,EAAE,iBAAiB,EAAnB,EAA/B;AACD,WAPD,MAQK;AACH,iBAAKlC,KAAL,CAAWmC,OAAX,CAAmB,KAAKpC,OAAL,CAAaqC,aAAhC;AACAlB,6BAAiBmB,UAAjB,CAA4B,UAA5B;AACD;AACF,S;;iCACDC,Q,uBAAW;AACT,cAAI,KAAKrC,OAAL,IAAgB,KAAKA,OAAL,CAAaa,qBAAjC,EACE,KAAKb,OAAL,CAAaa,qBAAb,CAAmC,KAAKd,KAAxC,EAA+C,KAAKE,SAApD;AACF,cAAIgB,mBAAmB,IAAIxB,gBAAJ,CAAqB,KAAKK,OAA1B,CAAvB;AACAmB,2BAAiBqB,gBAAjB,CAAkC,CAAC,eAAD,CAAlC;AACA,eAAKvC,KAAL,CAAWwC,OAAX;AACD,S;;iCACDC,W,wBAAYC,Q,EAAU;AACpB,cAAI,KAAK1C,KAAL,IAAc,IAAlB,EAAwB;AACtB,iBAAKA,KAAL,CAAW2C,OAAX,CAAmBD,QAAnB;AACD;AACF,S;;;;8BAjDe;AACd,mBAAO,KAAK1C,KAAZ;AACD;;;;;;;iBAbmB,I;;;;;iBACkB,KAAKG,W;;;;;iBACb,KAAKA,W;;;;;iBACV,K","file":"../../../message-view/message-view.js","sourcesContent":["import { bindable, customElement, noView } from 'aurelia-templating';\r\nimport { inject } from 'aurelia-dependency-injection';\r\nimport { AttributeManager } from '../common/attributeManager';\r\nimport { getBooleanFromAttributeValue } from '../common/attributes';\r\nimport { computedFrom } from 'aurelia-framework';\r\n@customElement('ui5-message-view')\r\n@inject(Element)\r\n\r\nexport class Ui5MessageView {\r\n  _view = null;\r\n  _parent = null;\r\n  _relation = null;\r\n  @bindable() ui5Id = null;\r\n  @bindable() asyncDescriptionHandler = this.defaultFunc;\r\n  @bindable() asyncURLHandler = this.defaultFunc;\r\n  @bindable() groupItems = false;\r\n  constructor(element) {\r\n    this.element = element;\r\n  }\r\n  defaultFunc() {\r\n\r\n  }\r\n  @computedFrom('_view')\r\n  get UIElement() {\r\n    return this._view;\r\n  }\r\n  addChild(child, elem) {\r\n    var path = jQuery.makeArray($(elem).parentsUntil(this.element));\r\n    for (elem of path) {\r\n      if (elem.localName == 'items') {\r\n        this._view.addItem(child);\r\n        return elem.localName;\r\n      }\r\n    }\r\n  }\r\n  removeChildByRelation(child, relation) {\r\n    if (relation === 'items' && this._view && child) {\r\n      this._view.removeItem(child);\r\n    }\r\n  }\r\n  attached() {\r\n    var attributeManager = new AttributeManager(this.element);\r\n    this._view = new sap.m.MessageView({\r\n      asyncDescriptionHandler: this.asyncDescriptionHandler,\r\n      asyncURLHandler: this.asyncURLHandler,\r\n      groupItems: getBooleanFromAttributeValue(this.groupItems),\r\n    });\r\n    this.element.removeAttribute('ui5-container');\r\n    if ($(this.element).closest(\"[ui5-container]\").length > 0) {\r\n      var prevSibling = null;\r\n      if (this.element.previousElementSibling)\r\n        prevSibling = this.element.previousElementSibling.au.controller.viewModel.UIElement;\r\n      this._parent = $(this.element).closest(\"[ui5-container]\")[0].au.controller.viewModel;\r\n      this._relation = this._parent.addChild(this._view, this.element, prevSibling);\r\n      attributeManager.addAttributes({ \"ui5-container\": '' });\r\n    }\r\n    else {\r\n      this._view.placeAt(this.element.parentElement);\r\n      attributeManager.addClasses(\"ui5-hide\");\r\n    }\r\n  }\r\n  detached() {\r\n    if (this._parent && this._parent.removeChildByRelation)\r\n      this._parent.removeChildByRelation(this._view, this._relation);\r\n    var attributeManager = new AttributeManager(this.element);\r\n    attributeManager.removeAttributes([\"ui5-container\"]);\r\n    this._view.destroy();\r\n  }\r\n  textChanged(newValue) {\r\n    if (this._view != null) {\r\n      this._view.setText(newValue);\r\n    }\r\n  }\r\n}\r\n"]}